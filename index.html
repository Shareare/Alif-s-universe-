<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SHARIARE ALIF - মশা তাড়াও গেম</title>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* মূল স্টাইল */
        body { 
            margin: 0; overflow: hidden; font-family: 'Hind Siliguri', sans-serif; 
            background-color: #ffffff; touch-action: manipulation; user-select: none;
        }

        #game-container { 
            position: relative; width: 100vw; height: 100vh; 
            display: flex; justify-content: center; align-items: center; 
        }
        
        /* ক্যারেক্টার */
        #character { 
            width: 280px; height: 380px; 
            background-size: contain; background-repeat: no-repeat; 
            background-position: center; 
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            z-index: 5;
        }
        
        /* মশা */
        .mosquito { 
            position: absolute; width: 70px; height: 70px; cursor: pointer; z-index: 10;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.2)); pointer-events: auto;
        }

        /* স্ট্যাটাস বার */
        #ui-bar {
            position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
            width: 95%; max-width: 600px; display: flex; 
            justify-content: space-between; align-items: center; z-index: 100; pointer-events: none;
        }
        .stat-box {
            background: white; padding: 8px 15px; border-radius: 50px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex; align-items: center; gap: 8px; font-weight: 700; color: #333; border: 1px solid #eee;
        }
        .anger-container { width: 120px; height: 15px; background: #e0e0e0; border-radius: 10px; overflow: hidden; }
        #anger-fill { height: 100%; width: 0%; background: linear-gradient(90deg, #ff9a9e 0%, #ff0000 100%); transition: width 0.3s ease; }

        /* ডেভেলপার ক্রেডিট (মোবাইলের জন্য উপরে সেট করা হয়েছে) */
        #developer-credit {
            position: absolute; bottom: 100px; /* নিচ থেকে ১০০ পিক্সেল উপরে */
            left: 50%; transform: translateX(-50%);
            z-index: 150; display: flex; flex-direction: column; align-items: center; gap: 5px;
            background: rgba(255, 255, 255, 0.9); padding: 10px 20px; border-radius: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: 1px solid #f0f0f0;
        }
        .dev-name { font-size: 12px; font-weight: bold; color: #555; letter-spacing: 1px; text-transform: uppercase; white-space: nowrap; }
        .fb-link { display: flex; align-items: center; text-decoration: none; transition: transform 0.2s; }
        .fb-icon { width: 35px; height: 35px; }

        /* ওভারলে স্ক্রিন */
        #overlay-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.98); display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 200; text-align: center; cursor: pointer;
        }
        .rule-box { padding: 15px; text-align: left; color: #555; font-size: 14px; }
        .pulse-text { margin-top: 20px; font-size: 1.2rem; font-weight: bold; color: #2e7d32; animation: pulse 1.5s infinite; padding: 10px 20px; border: 2px dashed; border-radius: 10px; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        
        .splat { position: absolute; width: 60px; height: 60px; background: rgba(255,0,0,0.4); border-radius: 50%; transform: scale(0); animation: splatAnim 0.3s forwards; pointer-events: none; z-index: 9; }
        @keyframes splatAnim { to { transform: scale(1.5); opacity: 0; } }
    </style>
</head>
<body>

<div id="game-container">
    <div id="ui-bar">
        <div class="stat-box">⏱ <span id="timer">120</span>s</div>
        <div class="stat-box" style="flex-direction: column; align-items: flex-start;">
            <div style="font-size: 10px; color: #d32f2f; font-weight: bold;">রাগ মিটার</div>
            <div class="anger-container"><div id="anger-fill"></div></div>
        </div>
    </div>

    <div id="character"></div>

    <div id="developer-credit">
        <div class="dev-name">Developed by SHARIARE ALIF</div>
        <a href="https://www.facebook.com/share/1DRJavxPdv/" target="_blank" class="fb-link">
            <img class="fb-icon" src="https://upload.wikimedia.org/wikipedia/commons/b/b8/2021_Facebook_icon.svg" alt="Facebook">
        </a>
    </div>

    <div id="overlay-screen" onclick="handleStart()">
        <div id="screen-content">
            <h1 style="color: #d32f2f; margin: 0;">আব্বাস Vs মশা পাটোয়ারী</h1>
            <div class="rule-box">
                ১. মশা দেখলেই ট্যাপ করে মেরে ফেলুন।<br>
                ২. ৩০ সেকেন্ডের বেশি কামড় খেতে দেবেন না।<br>
                ৩. ২ মিনিট টিকে থাকলে আপনিই বিজয়ী!
            </div>
            <p style="color: #666; font-size: 13px;">তৈরি করেছেন: <b>SHARIARE ALIF</b></p>
            <div class="pulse-text">শুরু করতে ট্যাপ করুন</div>
        </div>
    </div>
</div>

<audio id="buzz-sound" loop>
    <source src="https://assets.mixkit.co/active_storage/sfx/2658/2658-preview.mp3" type="audio/mpeg">
</audio>

<script>
    const charImgHappy = "https://i.ibb.co.com/Y4mLSFwK/1769917697923.png";
    const charImgAngry = "https://i.ibb.co.com/Y7Q4m72n/1769917805189.png";
    const mosquitoImg = "https://i.ibb.co.com/39PWGvzP/file-00000000602c720b8478529ebd662993.png";

    const character = document.getElementById('character');
    const overlayScreen = document.getElementById('overlay-screen');
    const timerDisplay = document.getElementById('timer');
    const angerFill = document.getElementById('anger-fill');
    const buzzSound = document.getElementById('buzz-sound');

    let gameTime = 120;
    let angerTime = 0;
    let isGameOver = false;
    let isGameRunning = false;
    let activeMosquitoes = 0;
    let spawnInterval = 1500;
    let spawnTimer;

    character.style.backgroundImage = `url('${charImgHappy}')`;

    function handleStart() {
        if (isGameOver) { location.reload(); return; }
        if (isGameRunning) return;
        
        isGameRunning = true;
        overlayScreen.style.display = 'none';
        buzzSound.play().catch(() => {});
        startLoops();
    }

    function startLoops() {
        const timerId = setInterval(() => {
            if (isGameOver) { clearInterval(timerId); return; }
            gameTime--;
            timerDisplay.innerText = gameTime;

            if (gameTime % 10 === 0 && spawnInterval > 400) {
                spawnInterval -= 150;
                resetSpawner();
            }
            if (gameTime <= 0) endGame(true);
        }, 1000);

        setInterval(() => {
            if (isGameOver) return;
            if (activeMosquitoes > 0) {
                angerTime += 0.5;
                character.style.backgroundImage = `url('${charImgAngry}')`;
                character.style.transform = "scale(1.08)";
            } else {
                character.style.backgroundImage = `url('${charImgHappy}')`;
                character.style.transform = "scale(1)";
            }
            angerFill.style.width = (angerTime / 30 * 100) + "%";
            if (angerTime >= 30) endGame(false);
        }, 500);

        resetSpawner();
    }

    function resetSpawner() {
        clearInterval(spawnTimer);
        spawnTimer = setInterval(() => {
            if (!isGameOver) createMosquito();
        }, spawnInterval);
    }

    function createMosquito() {
        const m = document.createElement('div');
        m.className = 'mosquito';
        m.style.backgroundImage = `url('${mosquitoImg}')`;
        m.style.backgroundSize = 'contain';
        m.style.backgroundRepeat = 'no-repeat';

        const side = Math.floor(Math.random() * 4);
        let x, y;
        if (side === 0) { x = Math.random() * window.innerWidth; y = -80; }
        else if (side === 1) { x = window.innerWidth + 80; y = Math.random() * window.innerHeight; }
        else if (side === 2) { x = Math.random() * window.innerWidth; y = window.innerHeight + 80; }
        else { x = -80; y = Math.random() * window.innerHeight; }

        m.style.left = x + 'px';
        m.style.top = y + 'px';
        document.getElementById('game-container').appendChild(m);

        const targetX = (window.innerWidth / 2) - 35 + (Math.random() * 100 - 50);
        const targetY = (window.innerHeight / 2) - 80 + (Math.random() * 100 - 50);

        let curX = x, curY = y;
        let biting = false;
        let speed = 2.5 + Math.random() * 3;

        const move = setInterval(() => {
            if (isGameOver) { m.remove(); clearInterval(move); return; }
            if (!biting) {
                let dx = targetX - curX, dy = targetY - curY;
                let dist = Math.sqrt(dx*dx + dy*dy);
                if (dist > 5) {
                    curX += (dx/dist) * speed; curY += (dy/dist) * speed;
                    m.style.left = curX + 'px'; m.style.top = curY + 'px';
                    m.style.transform = `rotate(${Math.atan2(dy, dx) * 57 + 90}deg)`;
                } else {
                    biting = true; activeMosquitoes++;
                    m.style.transform = `rotate(0deg)`;
                }
            }
        }, 25);

        m.onpointerdown = (e) => {
            e.stopPropagation();
            if (biting) activeMosquitoes--;
            const s = document.createElement('div');
            s.className = 'splat';
            s.style.left = e.clientX - 30 + 'px'; s.style.top = e.clientY - 30 + 'px';
            document.body.appendChild(s);
            setTimeout(() => s.remove(), 300);
            m.remove();
            clearInterval(move);
        };
    }

    function endGame(win) {
        isGameOver = true;
        buzzSound.pause();
        overlayScreen.style.display = 'flex';
        overlayScreen.innerHTML = `
            <h1 style="color: ${win ? '#2e7d32' : '#d32f2f'}">${win ? "বিজয়!" : "গেম ওভার!"}</h1>
            <p>${win ? "আপনি মশা তাড়িয়ে জিতে গেছেন!" : "জনতা কুপোকাত!"}</p>
            <div class="pulse-text">আবার খেলুন</div>
        `;
    }
</script>
</body>
</html>
